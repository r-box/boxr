<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Authenticate to Box (service-app) — box_auth_service • boxr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Authenticate to Box (service-app) — box_auth_service"><meta property="og:description" content='How you authenticate to Box depends the Box-app through which you
connect. A Box service-app can be useful for unattended jobs that need
access to only a limited part of Box, e.g. one folder.
Use this function to access Box using a service-app.
To access a service-app, you will need a JSON web-token (JWT),
generated by your Box-admin team. If you have a personal Box account, you
are your Box-admin team. You specify the JWT either as token_file,
the path to the JWT file, or as token_text, the text of the JWT.
Using JWT-authentication is more convenient than using standard OAuth2
authentication, as you do not have to go through the "OAuth Dance". This
convenience brings additional considerations because the JWT file gives
its bearer uninhibited access to anything the Box service-app can access.
Accordingly, you are recommended to:
give the service-account access to as little information as you need it
to have, e.g. a single folder.
keep the JWT file secure.

'><meta property="og:image" content="/logo.png"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">boxr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.3.6.9014</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/boxr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">Box Apps</li>
    <li>
      <a href="../articles/boxr-apps.html">Box Apps: Overview</a>
    </li>
    <li>
      <a href="../articles/boxr-app-interactive.html">Box Interactive-Apps</a>
    </li>
    <li>
      <a href="../articles/boxr-app-service.html">Box Service-Apps</a>
    </li>
    <li class="divider">
    <li>
      <a href="../articles/design.html">Design Philosophy</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/r-box/boxr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Authenticate to Box (service-app)</h1>
    <small class="dont-index">Source: <a href="https://github.com/r-box/boxr/blob/main/R/boxr_auth.R" class="external-link"><code>R/boxr_auth.R</code></a></small>
    <div class="hidden name"><code>box_auth_service.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>How you authenticate to Box depends the Box-app through which you
connect. A Box service-app can be useful for unattended jobs that need
access to only a limited part of Box, e.g. one folder.</p>
<p>Use this function to access Box using a service-app.</p>
<p>To access a service-app, you will need a JSON web-token (JWT),
generated by your Box-admin team. If you have a personal Box account, <em>you</em>
are your Box-admin team. You specify the JWT either as <code>token_file</code>,
the path to the JWT file, or as <code>token_text</code>, the text of the JWT.</p>
<p>Using JWT-authentication is more convenient than using standard OAuth2
authentication, as you do not have to go through the "OAuth Dance". This
convenience brings additional considerations because the JWT file gives
its bearer uninhibited access to anything the Box service-app can access.
Accordingly, you are recommended to:</p><ul><li><p>give the service-account access to as little information as you need it
to have, e.g. a single folder.</p></li>
<li><p>keep the JWT file secure.</p></li>
</ul></div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">box_auth_service</span><span class="op">(</span>token_file <span class="op">=</span> <span class="cn">NULL</span>, token_text <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-token-file">token_file<a class="anchor" aria-label="anchor" href="#arg-token-file"></a></dt>
<dd><p><code>character</code>, path to JSON token-file. If not provided,
the function will look for an environment variable <code>BOX_TOKEN_FILE</code>. If
that is not there, it will try <code>~/.boxr-auth/token.json</code>.</p></dd>


<dt id="arg-token-text">token_text<a class="anchor" aria-label="anchor" href="#arg-token-text"></a></dt>
<dd><p><code>character</code>, JSON text. If this is provided,
<code>token_file</code> is ignored.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>Invisible <code>NULL</code>, called for side effects.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The default behavior of a service-app is to act on behalf of the
service-account associated with the service-app. This is different
from an interactive-app, which acts on behalf of the Box user who
authenticates to it.</p>
<p>To use a service-app on a folder belonging to a Box user, either
the Box user has to invite the service-account to collaborate on a
folder belonging to the user, or the service-account has to invite the
Box user to collaborate on a folder belonging to the service-account.</p>
<p>In either case, you can use <code><a href="box_collab_create.html">box_collab_create()</a></code>.</p>
<p>In mid-2020, there appeared intermittent and unexplained failures of
<code>box_auth_service()</code>; the theory is that the clocks at either end
of the authentication process can be out-of-sync. The workaround
is to watch for this failure, then retry the authentication request
with a time-offset. If an offset is used, this function generates a message.</p>
<p>For more details on Box service-apps, including how to create them, and
service-app-based workflows, please read this boxr
<a href="https://r-box.github.io/boxr/articles/boxr-app-service.html" class="external-link">service-app article</a>.</p>
    </div>
    <div id="side-effects">
    <h2>Side-effects</h2>


<p>This function has some side effects:</p><ul><li><p>some global <code><a href="https://rdrr.io/r/base/options.html" class="external-link">options()</a></code> are set for your session to manage the token.</p></li>
<li><p>a message is printed to the console.</p></li>
</ul></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index">
<dl><dt><code><a href="box_auth.html">box_auth()</a></code></dt>
<dd><p>for authenticating to interactive-apps.</p></dd>

<dt><code><a href="box_collab_create.html">box_collab_create()</a></code></dt>
<dd><p>for creating a collaboration with a different account
on a Box file or folder.</p></dd>

<dt><a href="https://developer.box.com/en/guides/applications/custom-apps/jwt-setup" class="external-link">Box Developers: Setup with JWT</a></dt>
<dd><p>documentation for setting up Box (service) apps with JWT.</p></dd>


</dl></div>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Brendan Rocks, Ian Lyttle, Nathan Day.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

